<?xml version="1.0" encoding="UTF-8"?>
<project>
	 
	<!-- all properties are in build.properties -->
	<property file="build/build.properties" />
	
	<target name="initDojo">
		<if>
			<available file="../${dojoDir}" type="dir"/>
			<then>
				<antcall target="pullDojo" />
			</then>
			<else>
				<antcall target="cloneDojo" />
			</else>
		</if>        
	</target>
	
	<target name="pullDojo">
		<echo>Pull dojo from github</echo>
		
		<for list="${dojoSubDirs}" param="dir">
			<sequential>
				<exec executable = "bash" dir="../${dojoDir}/@{dir}">
					<arg value = "-c" />
					<arg value = "${gitXpull}" />
				</exec>
			</sequential>
		</for>

		<echo>Done!</echo>
	</target>
	
	<target name="cloneDojo">
		<echo>Clone dojo from github</echo>
		
		<mkdir dir="../${dojoDir}" />
		
		<for list="${dojoSubDirs}" param="dir">
			<sequential>
				<exec executable = "bash" dir="../${dojoDir}">
					<arg value = "-c" />
					<arg value = "git clone https://github.com/dojo/@{dir}.git;" />
				</exec>
			</sequential>
		</for>
		
		<echo>Done!</echo>
	</target>
		        	
	<target name="dojodir.check">
	    <condition property="dojodir.exists">
	    	<available file="../${dojoDir}" type="dir"/>
	    </condition>
	</target>
</project>